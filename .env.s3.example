# AWS S3 Configuration for ODAVL Cloud Storage
# Required for Phase 4.5: Cloud Storage Integration

# =====================================
# AWS S3 Credentials
# =====================================
# Get from: https://console.aws.amazon.com/iam/
AWS_ACCESS_KEY_ID=your_access_key_id_here
AWS_SECRET_ACCESS_KEY=your_secret_access_key_here
AWS_REGION=us-east-1
AWS_S3_BUCKET=odavl-storage

# =====================================
# S3-Compatible Services (Optional)
# =====================================
# Uncomment if using MinIO, DigitalOcean Spaces, or other S3-compatible service
# AWS_ENDPOINT_URL=https://nyc3.digitaloceanspaces.com
# AWS_ENDPOINT_URL=http://localhost:9000  # MinIO local

# =====================================
# Internal API Key (for usage tracking)
# =====================================
# Generate with: openssl rand -base64 32
INTERNAL_API_KEY=your_internal_api_key_here_min_32_chars

# =====================================
# Setup Instructions
# =====================================
# 1. Create AWS S3 Bucket:
#    - Go to https://s3.console.aws.amazon.com/
#    - Click "Create bucket"
#    - Name: odavl-storage (or your preferred name)
#    - Region: us-east-1 (or nearest to your users)
#    - Block public access: Yes (we use presigned URLs)
#    - Versioning: Optional (recommended for data safety)
#    - Encryption: Enable (SSE-S3 or SSE-KMS)
#
# 2. Create IAM User:
#    - Go to https://console.aws.amazon.com/iam/
#    - Create user: odavl-storage-service
#    - Attach policy: AmazonS3FullAccess (or custom policy below)
#    - Save credentials (access key ID + secret)
#
# 3. Custom IAM Policy (Least Privilege):
#    {
#      "Version": "2012-10-17",
#      "Statement": [
#        {
#          "Effect": "Allow",
#          "Action": [
#            "s3:PutObject",
#            "s3:GetObject",
#            "s3:DeleteObject",
#            "s3:ListBucket",
#            "s3:HeadObject"
#          ],
#          "Resource": [
#            "arn:aws:s3:::odavl-storage",
#            "arn:aws:s3:::odavl-storage/*"
#          ]
#        }
#      ]
#    }
#
# 4. Enable CORS (if using direct browser uploads):
#    [
#      {
#        "AllowedHeaders": ["*"],
#        "AllowedMethods": ["GET", "PUT", "POST", "DELETE"],
#        "AllowedOrigins": ["https://odavl.studio", "http://localhost:3000"],
#        "ExposeHeaders": ["ETag"],
#        "MaxAgeSeconds": 3600
#      }
#    ]
#
# 5. Lifecycle Policy (Optional - Auto-cleanup):
#    - Transition to Glacier after 90 days
#    - Delete incomplete multipart uploads after 7 days
#
# =====================================
# Cost Optimization Tips
# =====================================
# - Use S3 Standard-IA for infrequently accessed files
# - Enable Intelligent-Tiering for automatic cost optimization
# - Set lifecycle policies to move old files to Glacier
# - Monitor usage with AWS Cost Explorer
# - Set up CloudWatch alarms for unexpected costs
#
# FREE Tier (First 12 months):
# - 5 GB storage
# - 20,000 GET requests
# - 2,000 PUT requests
#
# Pricing (after free tier):
# - Storage: $0.023/GB/month (Standard)
# - PUT/POST: $0.005 per 1,000 requests
# - GET: $0.0004 per 1,000 requests
# - Data transfer out: $0.09/GB (first 10 TB)
#
# =====================================
# Alternative: DigitalOcean Spaces
# =====================================
# Simpler, fixed pricing: $5/month for 250 GB + 1 TB transfer
# S3-compatible API, easy to use
# Set AWS_ENDPOINT_URL=https://nyc3.digitaloceanspaces.com
#
# =====================================
# Development: MinIO (Local S3)
# =====================================
# docker run -p 9000:9000 -p 9001:9001 \
#   -e MINIO_ROOT_USER=minioadmin \
#   -e MINIO_ROOT_PASSWORD=minioadmin \
#   minio/minio server /data --console-address ":9001"
#
# Then set:
# AWS_ENDPOINT_URL=http://localhost:9000
# AWS_ACCESS_KEY_ID=minioadmin
# AWS_SECRET_ACCESS_KEY=minioadmin
