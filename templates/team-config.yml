# ODAVL Team Configuration
# Define code standards, quality gates, and team metrics tracking
# Place this file in your project root or .odavl/ directory

version: 1.0.0

# Team Information
team:
  name: "Engineering Team" # Your team name
  project: "ODAVL Project" # Project name
  timezone: "UTC" # Team timezone for metrics display

  # Team Members (for leaderboard and attribution)
  members:
    - name: "Alice Johnson"
      email: "alice@example.com"
      role: "Senior Engineer"
      avatar: "https://github.com/alice.png" # Optional: GitHub/GitLab avatar

    - name: "Bob Smith"
      email: "bob@example.com"
      role: "Mid-Level Engineer"
      avatar: "https://github.com/bob.png"

    - name: "Charlie Davis"
      email: "charlie@example.com"
      role: "Junior Engineer"
      avatar: "https://github.com/charlie.png"

# Code Quality Standards
standards:
  # Complexity Thresholds
  complexity:
    max_cyclomatic: 15 # Maximum cyclomatic complexity per function
    max_cognitive: 20 # Maximum cognitive complexity per function
    max_file_lines: 500 # Maximum lines per file
    max_function_lines: 100 # Maximum lines per function

  # Test Coverage Requirements
  coverage:
    required_line: 80 # Minimum line coverage percentage
    required_branch: 75 # Minimum branch coverage percentage
    required_function: 85 # Minimum function coverage percentage

  # Documentation Requirements
  documentation:
    require_jsdoc: true # Require JSDoc for public APIs
    require_readme: true # Require README in each package
    require_changelog: true # Require CHANGELOG updates

  # Code Style
  style:
    max_line_length: 120 # Maximum characters per line
    indent_size: 2 # Spaces per indent level
    quote_style: "single" # 'single' or 'double'
    trailing_comma: true # Require trailing commas

# Quality Gates (Per Severity)
quality_gates:
  critical:
    max_issues: 0 # Must be zero to pass
    block_merge: true # Block PR/MR merge if exceeded
    create_issue: true # Auto-create GitHub/GitLab issue
    notify_team: true # Notify team via Slack/email

  high:
    max_issues: 5 # Maximum allowed high-priority issues
    block_merge: true
    create_issue: true
    notify_team: false

  medium:
    max_issues: 20 # Maximum allowed medium-priority issues
    block_merge: false
    create_issue: false
    notify_team: false

  low:
    max_issues: 50 # Maximum allowed low-priority issues
    block_merge: false
    create_issue: false
    notify_team: false

  # Health Score Gate
  health_score:
    minimum: 60 # Minimum health score to pass (0-100)
    target: 80 # Target health score for excellence
    block_merge_below: 50 # Block merge if below this score

# Team Metrics Configuration
metrics:
  # Leaderboard Settings
  leaderboard:
    enabled: true # Enable team leaderboard
    period: "30d" # Leaderboard period: 7d, 30d, 90d, all

    # Scoring Weights (higher = more important)
    weights:
      issues_fixed: 10 # Points per issue fixed
      code_quality_improvement: 5 # Points per 1% health score increase
      test_coverage_increase: 3 # Points per 1% coverage increase
      reviews_completed: 2 # Points per PR review
      zero_defect_commits: 15 # Bonus for commits with zero new issues

    # Display Options
    show_avatars: true # Show team member avatars
    show_rankings: true # Show #1, #2, #3 rankings
    show_trends: true # Show up/down trend arrows
    anonymous_mode: false # Hide names (show only initials)

  # Individual Contributor Metrics
  contributor:
    track_commits: true # Track commits per contributor
    track_reviews: true # Track code reviews
    track_fixes: true # Track bug fixes
    track_regressions: true # Track introduced regressions

    # Velocity Metrics
    velocity:
      avg_commit_size: true # Average lines per commit
      avg_review_time: true # Average time to review PR
      avg_fix_time: true # Average time to fix issue

  # Project Health Metrics
  project:
    track_health_score: true # Overall project health (0-100)
    track_debt: true # Technical debt accumulation
    track_trends: true # 7-day, 30-day trends
    track_violations: true # Quality gate violations

# Custom Rules (Optional)
custom_rules:
  # File-specific standards (overrides global standards)
  - path: "src/security/**"
    standards:
      complexity:
        max_cyclomatic: 10 # Stricter for security code
      coverage:
        required_line: 95 # Higher coverage for security

  - path: "src/tests/**"
    standards:
      complexity:
        max_function_lines: 200 # Allow longer test functions
      coverage:
        required_line: 50 # Lower coverage requirements for tests

# Ignore patterns (files excluded from team metrics)
ignore:
  - "**/*.test.ts"
  - "**/*.spec.ts"
  - "**/node_modules/**"
  - "**/dist/**"
  - "**/coverage/**"
  - "**/*.d.ts" # Type declaration files

# Notifications (Optional)
notifications:
  # Slack Integration
  slack:
    enabled: false
    webhook_url: "" # Your Slack webhook URL
    channel: "#engineering" # Channel name
    notify_on:
      - critical_issues # Critical issues detected
      - quality_gate_failed # Quality gates failed
      - leaderboard_update # Weekly leaderboard update

  # Email Integration
  email:
    enabled: false
    smtp_host: "smtp.example.com"
    smtp_port: 587
    from: "odavl@example.com"
    notify_on:
      - critical_issues
      - quality_gate_failed

  # GitHub/GitLab Integration
  vcs:
    enabled: true # Use built-in PR/MR comments
    create_issues: true # Auto-create issues for critical findings
    labels:
      - "code-quality"
      - "odavl-insight"

# Reporting
reporting:
  # Automated Report Generation
  automated:
    enabled: true
    schedule: "weekly" # daily, weekly, monthly
    format: "html" # html, pdf, json, markdown
    output_dir: ".odavl/reports/team"

    # Report Sections
    include:
      - executive_summary # High-level overview
      - health_trends # Health score over time
      - leaderboard # Team rankings
      - top_issues # Most common issues
      - hotspots # Most problematic files
      - improvements # Week-over-week improvements

  # Manual Report Generation
  manual:
    formats:
      - html
      - pdf
      - json
    output_dir: ".odavl/reports/manual"

# Advanced Settings
advanced:
  # Cache Settings
  cache:
    enabled: true
    ttl: 3600 # Cache TTL in seconds (1 hour)

  # Performance
  performance:
    max_parallel_analyses: 4 # Parallel analysis jobs
    timeout: 300 # Analysis timeout in seconds (5 minutes)

  # Data Retention
  retention:
    metrics_history: "1y" # Keep metrics for 1 year
    reports_history: "90d" # Keep reports for 90 days
    cleanup_enabled: true # Auto-cleanup old data

# Version Control Integration
vcs:
  platform: "github" # github, gitlab, bitbucket

  # GitHub-specific settings
  github:
    owner: "your-org"
    repo: "your-repo"
    api_token: "" # Optional: Personal access token for API

  # GitLab-specific settings
  gitlab:
    project_id: ""
    api_token: "" # Optional: Personal access token for API

# AI/ML Settings (ODAVL Insight Learning)
learning:
  enabled: true # Enable ML-powered recommendations
  model_version: "1.0"
  retrain_frequency: "weekly" # How often to retrain model
  feedback_weight: 0.5 # Weight of manual feedback (0-1)

# Feature Flags
features:
  enable_autopilot: false # Enable ODAVL Autopilot (autonomous fixes)
  enable_guardian: false # Enable ODAVL Guardian (monitoring)
  enable_ml_suggestions: true # Enable ML fix suggestions
  enable_security_scan: true # Enable security vulnerability scanning
  enable_performance_scan: true # Enable performance issue detection
