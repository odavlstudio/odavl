# Backup Schedule Configuration for ODAVL Insight Cloud

# This file is used by backup automation scripts and cron jobs
# Format: TYPE SCHEDULE RETENTION UPLOAD
# - TYPE: daily, weekly, monthly
# - SCHEDULE: cron expression
# - RETENTION: days to keep backups
# - UPLOAD: true/false (upload to cloud storage)

# Daily backups at 2:00 AM (kept for 7 days)
DAILY_SCHEDULE="0 2 * * *"
DAILY_RETENTION=7
DAILY_UPLOAD=true

# Weekly backups on Sunday at 3:00 AM (kept for 28 days)
WEEKLY_SCHEDULE="0 3 * * 0"
WEEKLY_RETENTION=28
WEEKLY_UPLOAD=true

# Monthly backups on 1st of month at 4:00 AM (kept for 365 days)
MONTHLY_SCHEDULE="0 4 1 * *"
MONTHLY_RETENTION=365
MONTHLY_UPLOAD=true

# Cloud storage configuration
CLOUD_PROVIDER="s3"  # s3, azure, or gcs
S3_BUCKET="odavl-backups"
S3_REGION="us-east-1"
AZURE_CONTAINER="odavl-backups"
GCS_BUCKET="odavl-backups"

# Notification settings
NOTIFY_ON_SUCCESS=false
NOTIFY_ON_FAILURE=true
SLACK_WEBHOOK_URL=""
EMAIL_RECIPIENTS="admin@odavl.com"

# Backup verification
VERIFY_BACKUP=true
TEST_RESTORE=false  # Periodically test backup restoration

# Compression settings
COMPRESSION_LEVEL=9  # 1-9, higher = better compression but slower
USE_PARALLEL_COMPRESSION=true

# Encryption (optional)
ENCRYPT_BACKUPS=false
ENCRYPTION_KEY=""

# Cleanup settings
AUTO_CLEANUP=true
CLEANUP_ON_UPLOAD=true  # Remove local backup after successful upload

# Database-specific settings
DB_BACKUP_METHOD="pg_dump"  # pg_dump or pg_basebackup
INCLUDE_SCHEMA=true
INCLUDE_DATA=true
EXCLUDE_TABLES=""  # Comma-separated list of tables to exclude

# Monitoring
ENABLE_METRICS=true
METRICS_ENDPOINT="https://monitoring.odavl.com/api/metrics"
